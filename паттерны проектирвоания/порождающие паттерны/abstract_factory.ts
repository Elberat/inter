// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç—å–∏ "–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞"
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ (–∞–Ω–≥–ª. abstract factory) ‚Äî —ç—Ç–æ —Ñ–∞–±—Ä–∏–∫–∞ —Ñ–∞–±—Ä–∏–∫ üòÉ

// –≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–º–µ—Å—Ç–µ, –ø–æ–∑–≤–æ–ª—è—è –≤—ã–±–∏—Ä–∞—Ç—å –Ω—É–∂–Ω—É—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏.

// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω.

// –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —Å–º—ã—Å–ª –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è TypeScript –∏ –ø–æ–Ω—è—Ç–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –º—É–∑—ã–∫–∞–ª—å–Ω—ã–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º –¥–ª—è –∫–æ–Ω—Ü–µ—Ä—Ç–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞.

// –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑–Ω—ã–µ, –Ω–æ –≤—Å–µ –∏—Ö –º—ã –º–æ–∂–µ–º –æ–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Instrument:

interface Instrument {
    playNote(note: MusicNote): void;
}

class Violin implements Instrument {
    playNote(note) {
        console.log(`Playing ${note} on violin!`);
    }
}

class Cello implements Instrument {
    playNote(note) {
        console.log(`Playing ${note} on cello!`);
    }
}

// –ú—É–∑—ã–∫–∞–Ω—Ç—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞ –∏–≥—Ä–∞—é—Ç —Å—Ç—Ä–æ–≥–æ –∫–∞–∂–¥—ã–π –Ω–∞ —Å–≤–æ—ë–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ, –Ω–æ –≤—Å–µ—Ö –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤ –º—ã –º–æ–∂–µ–º –æ–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Musician:

interface Musician {
    play(piece: MusicPiece): void;
}

// –¢–æ–≥–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä–∏–ø–∞—á–µ–π –∏ –≤–∏–æ–ª–æ–Ω—á–µ–ª–∏—Å—Ç–æ–≤ –º—ã —Å–º–æ–∂–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫:

class Violinist implements Musician {
    private instrument: Instrument = new Violin();

    play = piece => piece.forEach(note => this.instrument.playNote(note));
    // Playing A# on violin!
    // Playing C on violin!
    // ...
}

class Cellist implements Musician {
    private instrument: Instrument = new Cello();

    play = piece => piece.forEach(note => this.instrument.playNote(note));
    // Playing A# on cello!
    // Playing C on cello!
    // ...
}

// –¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–µ–º —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –º–µ—Å—Ç–∞ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º—É–∑—ã–∫–∞–Ω—Ç–∞ –≤ –æ—Ä–∫–µ—Å—Ç—Ä–µ.

class ViolinReservation {
    reserveViolin = () => new Violin();
    notifyPlayer = () => new Violinist();
}

class CelloReservation {
    reserveCello = () => new Cello();
    notifyPlayer = () => new Cellist();
}

// –ü—É—Å—Ç—å –º–µ—Å—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π reserve. –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Å—Ç. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π —Ç–∏–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É –∞—Ä–≥—É–º–µ–Ω—Ç–∞, —Ç–∞–∫–∂–µ –Ω–µ—è—Å–Ω–æ, –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞—Ç—å –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

// –í –∞—Ä–≥—É–º–µ–Ω—Ç–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤,
// –Ω–æ –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—Å—è –µ—â—ë –∫–∞–∫–æ–π-—Ç–æ –∫–ª–∞—Å—Å,
// –ø—Ä–∏–¥—ë—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ —ç—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–∂–µ :‚Äì(
function reserve(reservation: ViolinReservation | CelloReservation): void {
    // –£–≤–µ–¥–æ–º–∏—Ç—å –º—É–∑—ã–∫–∞–Ω—Ç–∞, –¥–æ–ø—É—Å—Ç–∏–º, –º—ã –º–æ–∂–µ–º:
    reservation.notifyPlayer();

    // –ê –≤–æ—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞,
    // –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–Ω–∞—Ç—å, –∫–∞–∫–æ–π –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ –∫–ª–∞—Å—Å :‚Äì(
    if (reservation instanceof ViolinReservation) {
        reservation.reserveViolin();
    } else if (reservation instanceof CelloReservation) {
        reservation.reserveCello();
    }
}
// –¢–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –æ—á–µ–Ω—å —Ö—Ä—É–ø–∫–æ–π, –∏ –µ—ë –ø—Ä–∏–¥—ë—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞. –ù–∞–º —Ö–æ—á–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –ª—é–±—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —Ç–æ–≥–æ, —á—Ç–æ —Å–∫–æ–ª—å–∫–æ –±—ã –Ω–∏ –±—ã–ª–æ –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤, –∫–∞–∫–∏–µ –±—ã –æ–Ω–∏ –Ω–∏ –±—ã–ª–∏, –º—ã –≤—Å–µ–≥–¥–∞ —Å–º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è.

// –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –∫–∞–∫ —Ä–∞–∑ –ø–æ–¥–æ–π–¥—ë—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞:

// –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
interface ReservationFactory {
    reserveInstrument(): Instrument;
    notifyPlayer(): Musician;
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
class ViolinReservation implements ReservationFactory {
    reserveInstrument = () => new Violin();
    notifyPlayer = () => new Violinist();
}

class CelloReservation implements ReservationFactory {
    reserveInstrument = () => new Cello();
    notifyPlayer = () => new Cellist();
}

// –¢–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è reserve —Å—Ç–∞–Ω–µ—Ç –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–µ–µ –∏ –º–µ–Ω–µ–µ —Ö—Ä—É–ø–∫–æ–π:

function reserve(reservation: ReservationFactory): void {
    reservation.notifyPlayer();
    reservation.reserveInstrument();
}
